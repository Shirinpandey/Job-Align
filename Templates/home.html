{% extends 'base.html'%}
{% block head %}
    <link rel="stylesheet" href="{{url_for('static',filename = 'styles.css')}}">

{% endblock %}
{% block body %}
<div class = 'header'>
    <p class="subtitle">Get jobs aligned to your needs or your cv</p>
</div>
<div class = 'homepage'>
    <div class = 'search'><h1 class = 'search-title'>Search for your job</h1><br>
    <form action = "{{ url_for('search.job_search') }}" method = 'GET'>
      <input type="text" name="query" class="search-input" placeholder="Enter job title, company, or keyword" required>
      <button action = 'submit' class = 'search-btn'>Search</button>
    </form>
    </div>
    <div>
    <form action="/job/" method="post" enctype="multipart/form-data" id="uploadForm">
        <label for="cv" class="upload-zone" id="uploadZone">
            <div class="upload-icon">ðŸ“‹</div>
            <div class="upload-text">Click to browse and add your CV  </div>
            <div class="upload-subtext">Maximum file size: 10MB</div>
            <div class="file-types">
                <span class="file-type">PDF</span>
                <span class="file-type">TXT</span>
            </div>
            <input type="file" name="cv" id="cv" accept=".txt,.pdf" required hidden>
            <div class="selected-file" id="selectedFile"></div>
        </label> 
        
        <input type="submit" value="Analyze CV & Find Matches" class="submit-button">
        {% if uploaded_filename %}
            <p style="margin-top: 1rem; color: rgb(77, 77, 152);">
                CV Uploaded: {{ uploaded_filename }}
            </p>
        {% endif %}

    </form>
    </div>
</div>
<script>
  // Wait until the page fully loads
  document.addEventListener('DOMContentLoaded', function () {
    // Select all buttons with class 'close' inside flash messages
    const closeButtons = document.querySelectorAll('.flash-message .close');

    // Loop through each close button and add click event listener
    closeButtons.forEach(button => {
      button.addEventListener('click', () => {
        // Hide the flash message container (parent of the button)
        button.parentElement.style.display = 'none';
      });
    });
  });
</script>

{% endblock %}
